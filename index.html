<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©</title>
  <style>
    :root {
      --brand:#22a06b;
      --brand-700:#1a8a5c;
      --bg:#f6f7f9;
      --ink:#0f172a;
      --muted:#6b7280;
      --card:#ffffff;
      --danger:#ef4444;
      --warn:#f59e0b;
      --ok:#16a34a;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      background: var(--bg);
      line-height: 1.6;
    }
    a { color: inherit; text-decoration: none; }

    /* Header + Nav */
    header {
      position: sticky; top: 0; z-index: 1000;
      background: var(--brand); color:#fff;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 0 16px; }
    .bar { display:flex; align-items:center; justify-content:space-between; padding: 14px 0; }
    .brand { display:flex; align-items:center; gap:12px; }
    .brand img { width:40px; height:40px; object-fit:cover; border-radius:10px; background:#fff; }
    .brand h1 { font-size: 18px; margin:0; }

    nav.primary { display:flex; gap:14px; }
    nav.primary a { padding:8px 10px; border-radius:10px; }
    nav.primary a:hover { background: rgba(255,255,255,.15); }

    .menu-btn { display:none; font-size:26px; cursor:pointer; user-select:none; }

    /* Mobile menu */
    @media (max-width: 768px) {
      nav.primary { display:none; position:absolute; right:10px; left:10px; top:64px; background:var(--brand); padding:10px; border-radius:14px; flex-direction:column; }
      nav.primary.open { display:flex; }
      .menu-btn { display:block; }
    }

    /* Sections */
    section { padding: 28px 0; }
    section .wrap > h2 { margin-top:0; font-size: 24px; }

    .hero {
      background: linear-gradient(180deg, #ffffff, #f0f7f4);
      border-bottom: 1px solid #e5e7eb;
    }
    .hero .inner {
      display:grid; grid-template-columns: 1.2fr .8fr; gap:28px; align-items:center;
    }
    .hero img.hero-logo { width:100%; max-width:180px; border-radius:18px; box-shadow:0 10px 20px rgba(0,0,0,.08); background:#fff; }
    .hero h2 { font-size: 28px; margin: 4px 0 8px; }
    .hero p { color: var(--muted); margin:0; }
    @media (max-width: 900px) {
      .hero .inner { grid-template-columns: 1fr; text-align:center; }
      .hero img.hero-logo { margin: 0 auto; }
    }

    /* Cards grid */
    .grid { display:flex; flex-wrap:wrap; gap:16px; justify-content:center; }
    .card { background:var(--card); border-radius:16px; box-shadow:0 6px 18px rgba(0,0,0,.06); padding:16px; flex:1 1 calc(33% - 16px); max-width:320px; }
    .card h3 { margin:8px 0 6px; font-size:18px; }
    .card p { margin: 0 0 10px; color: var(--muted); }
    .price { font-weight:700; color: var(--ink); margin-bottom:8px; }
    .actions { display:flex; gap:8px; }
    .btn { display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 12px; border:none; border-radius:12px; cursor:pointer; font-weight:600; }
    .btn.primary { background:var(--brand); color:#fff; }
    .btn.primary:hover { background:var(--brand-700); }
    .btn.ghost { background:#eef2f7; }
    .btn.danger { background: var(--danger); color:#fff; }

    @media (max-width: 900px) { .card { flex:1 1 calc(50% - 16px); } }
    @media (max-width: 560px) { .card { flex:1 1 100%; } }

    /* Forms */
    .form { background:var(--card); border-radius:16px; padding:16px; box-shadow:0 6px 18px rgba(0,0,0,.06); }
    .row { display:grid; grid-template-columns: repeat(2, 1fr); gap:12px; }
    .row-3 { grid-template-columns: repeat(3, 1fr); }
    .row-1 { grid-template-columns: 1fr; }
    label { font-size:12px; color:var(--muted); display:block; margin-bottom:6px; }
    input, textarea, select { width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px; background:#fff; font-family:inherit; }
    textarea { min-height: 84px; resize: vertical; }
    .mt { margin-top: 14px; }

    @media (max-width: 700px) { .row, .row-3 { grid-template-columns: 1fr; } }

    /* Admin */
    .admin-guard { background: #fff7ed; border:1px dashed #fdba74; color:#b45309; padding:14px; border-radius:12px; }
    .table { width:100%; border-collapse: collapse; background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.06); }
    .table th, .table td { padding:10px; border-bottom:1px solid #eef2f7; text-align: right; }
    .status { display:inline-block; padding:4px 8px; border-radius:10px; font-size:12px; }
    .st-pending { background:#fff7ed; color:#b45309; }
    .st-replied { background:#ecfeff; color:#0369a1; }
    .st-done { background:#ecfdf5; color:#065f46; }

    footer { padding: 28px 16px; color:#64748b; text-align:center; }
  </style>
</head>
<body>
  <!-- Header / Navigation -->
  <header>
    <div class="wrap bar">
      <div class="brand">
        <img id="logo" src="https://via.placeholder.com/120x120.png?text=Logo" alt="Ø´Ø¹Ø§Ø±" />
        <h1 id="siteName">Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©</h1>
      </div>
      <div class="menu-btn" id="menuBtn">â˜°</div>
      <nav class="primary" id="nav">
        <a href="#welcome">Ø§Ù„ØªØ±Ø­ÙŠØ¨</a>
        <a href="#offers">Ø§Ù„Ø¹Ø±ÙˆØ¶</a>
        <a href="#contact">Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª</a>
        <a href="#admin">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</a>
      </nav>
    </div>
  </header>

  <!-- Welcome -->
  <section id="welcome" class="hero">
    <div class="wrap inner">
      <div>
        <h2 id="welcomeTitle">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹</h2>
        <p id="welcomeText">Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…Ø®ØµØµØ© Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ù…Ø¹ ØªÙˆØ§ØµÙ„ Ù…Ø¨Ø§Ø´Ø± Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨. ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„.</p>
      </div>
      <div style="text-align:center">
        <img class="hero-logo" id="heroLogo" src="https://via.placeholder.com/300x300.png?text=Logo" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹" />
      </div>
    </div>
  </section>

  <!-- Offers -->
  <section id="offers">
    <div class="wrap">
      <h2>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
      <div class="form mt">
        <div class="row">
          <div>
            <label>Ø¨Ø­Ø«</label>
            <input id="q" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶ Ø£Ùˆ Ø§Ù„Ø¯ÙˆÙ„Ø©â€¦" />
          </div>
          <div>
            <label>Ø§Ù„ØªØ±ØªÙŠØ¨</label>
            <select id="sort">
              <option value="new">Ø§Ù„Ø£Ø­Ø¯Ø«</option>
              <option value="price-asc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰</option>
              <option value="price-desc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„</option>
            </select>
          </div>
        </div>
      </div>

      <div id="offersGrid" class="grid mt"></div>
    </div>
  </section>

  <!-- Contact / Inquiries -->
  <section id="contact">
    <div class="wrap">
      <h2>Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª</h2>
      <div class="form mt">
        <div class="row">
          <div>
            <label>Ø§Ø³Ù…Ùƒ</label>
            <input id="inqName" placeholder="Ø§Ù„Ø§Ø³Ù…" />
          </div>
          <div>
            <label>Ù…Ø§ Ù‡Ùˆ Ø³Ø¤Ø§Ù„ÙƒØŸ</label>
            <input id="inqMsg" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ø¨Ø¥ÙŠØ¬Ø§Ø²â€¦" />
          </div>
        </div>
        <div class="mt" style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn primary" id="btnInq">Ø£Ø±Ø³Ù„ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
          <button class="btn ghost" id="btnInqClear">Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Admin -->
  <section id="admin">
    <div class="wrap">
      <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ğŸ”’</h2>
      <div id="adminGate" class="admin-guard mt">
        <b>Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ø­Ù…ÙŠØ©.</b>
        <div class="row mt">
          <div>
            <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input id="adminPassInput" type="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© 1234" />
          </div>
          <div style="align-self:end;">
            <button class="btn primary" id="btnLogin">Ø¯Ø®ÙˆÙ„</button>
          </div>
        </div>
      </div>

      <div id="adminArea" style="display:none;">
        <!-- Settings -->
        <div class="form mt">
          <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©</h3>
          <div class="row">
            <div>
              <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
              <input id="setSiteName" />
            </div>
            <div>
              <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±</label>
              <input id="setLogo" placeholder="https://â€¦" />
            </div>
          </div>
          <div class="row mt">
            <div>
              <label>Ù†Øµ Ø§Ù„ØªØ±Ø­ÙŠØ¨</label>
              <textarea id="setWelcomeText"></textarea>
            </div>
            <div>
              <label>Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ø¯ÙˆÙ„ÙŠ Ø¨Ø¯ÙˆÙ† +)</label>
              <input id="setWhats" placeholder="9677xxxxxxxx" />
            </div>
          </div>
          <div class="row mt">
            <div>
              <label>ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ (ØªØºÙŠÙŠØ±)</label>
              <input id="setNewPass" type="password" placeholder="Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºÙ‹Ø§ Ø¥Ø°Ø§ Ù„Ø§ ØªØ±ÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±" />
            </div>
            <div style="align-self:end;">
              <button class="btn primary" id="btnSaveSettings">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            </div>
          </div>
        </div>

        <!-- Offer management -->
        <div class="form mt">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶</h3>
          <div class="row-3">
            <div>
              <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶</label>
              <input id="ofName" />
            </div>
            <div>
              <label>Ø§Ù„Ø¯ÙˆÙ„Ø© / Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø®ØªØµØ±</label>
              <input id="ofCountry" />
            </div>
            <div>
              <label>Ø§Ù„Ø³Ø¹Ø± (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±)</label>
              <input id="ofPrice" type="number" min="0" step="0.01" />
            </div>
          </div>
          <div class="row mt">
            <div>
              <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
              <input id="ofNote" />
            </div>
            <div style="align-self:end;">
              <button class="btn primary" id="btnAddOffer">Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶</button>
            </div>
          </div>

          <table class="table mt" id="offersTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Ø§Ù„Ø¹Ø±Ø¶</th>
                <th>Ø§Ù„Ø¯ÙˆÙ„Ø©</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>ØªØ­ÙƒÙ…</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Orders -->
        <div class="form mt">
          <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h3>
          <table class="table" id="ordersTable">
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø¹Ø±Ù</th>
                <th>Ø§Ù„Ø¹Ø±Ø¶</th>
                <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                <th>ØªØ­ÙƒÙ…</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <p class="mt" style="color:#64748b">ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„ØªØ²Ø§Ù…Ù† Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§ØªØ³Ø§Ø¨ ÙŠØªØ·Ù„Ø¨ Ø®Ø§Ø¯Ù…/ÙˆØ§Ø¬Ù‡Ø© API. Ù‡Ù†Ø§ ØªÙ‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨.</p>
        </div>
      </div>
    </div>
  </section>

  <footer>
    Â© <span id="year"></span> <span id="footName">Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©</span>
  </footer>

  <script>
    // ======= Storage helpers =======
    const LS = {
      get(key, fallback) { try { return JSON.parse(localStorage.getItem(key)) ?? fallback; } catch { return fallback; } },
      set(key, val) { localStorage.setItem(key, JSON.stringify(val)); }
    };

    // ======= Default data =======
    const DEF_SETTINGS = {
      siteName: 'Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©',
      logo: 'https://via.placeholder.com/120x120.png?text=Logo',
      welcomeText: 'Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…Ø®ØµØµØ© Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ù…Ø¹ ØªÙˆØ§ØµÙ„ Ù…Ø¨Ø§Ø´Ø± Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨. ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„.',
      whatsapp: '967700000000'
    };
    const DEF_OFFERS = [
      { id: uid(), name:'Ø±Ù‚Ù… Ø³Ø¹ÙˆØ¯ÙŠ', country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', price:5, note:'ØªÙØ¹ÙŠÙ„ ÙˆØ§ØªØ³Ø§Ø¨/ØªÙ„ÙŠØ¬Ø±Ø§Ù…' },
      { id: uid(), name:'Ø±Ù‚Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ', country:'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', price:7, note:'ØµØ§Ù„Ø­ Ù„Ù€ OTP' },
      { id: uid(), name:'Ø±Ù‚Ù… ØªØ±ÙƒÙŠ', country:'ØªØ±ÙƒÙŠØ§', price:10, note:'Ø¶Ù…Ø§Ù† 24 Ø³Ø§Ø¹Ø©' },
    ];

    // ======= State =======
    let settings = LS.get('vn_site', DEF_SETTINGS);
    let offers   = LS.get('vn_offers', DEF_OFFERS);
    let orders   = LS.get('vn_orders', []);
    let adminOK  = false;
    let adminPass = LS.get('vn_adminPass', '1234');

    // ======= Utils =======
    function uid(){ return Math.random().toString(36).slice(2,9); }
    function money(x){ return new Intl.NumberFormat('ar', { style:'currency', currency:'USD' }).format(x); }

    // ======= Init UI =======
    const logoEl = document.getElementById('logo');
    const heroLogoEl = document.getElementById('heroLogo');
    const siteNameEl = document.getElementById('siteName');
    const footNameEl = document.getElementById('footName');
    const welcomeTextEl = document.getElementById('welcomeText');
    const offersGrid = document.getElementById('offersGrid');

    function applySettings(){
      logoEl.src = settings.logo || DEF_SETTINGS.logo;
      heroLogoEl.src = settings.logo || DEF_SETTINGS.logo;
      siteNameEl.textContent = settings.siteName || DEF_SETTINGS.siteName;
      footNameEl.textContent = settings.siteName || DEF_SETTINGS.siteName;
      welcomeTextEl.textContent = settings.welcomeText || DEF_SETTINGS.welcomeText;
    }

    function renderOffers(){
      const q = (document.getElementById('q').value || '').trim();
      const sort = document.getElementById('sort').value;
      let list = [...offers];
      if(q){
        const k = q.toLowerCase();
        list = list.filter(o => (o.name+o.country+o.note).toLowerCase().includes(k));
      }
      if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
      else if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);
      else list = list.reverse(); // new first (assuming added last)

      offersGrid.innerHTML = list.map(o=>`
        <div class="card">
          <h3>${o.name}</h3>
          <p>${o.country}${o.note? ' â€¢ '+o.note: ''}</p>
          <div class="price">${money(o.price)}</div>
          <div class="actions">
            <button class="btn primary" onclick="orderNow('${o.id}')">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
            <button class="btn ghost" onclick="copyDetails('${o.id}')">Ù†Ø³Ø® Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
          </div>
        </div>
      `).join('');
    }

    function copyDetails(id){
      const o = offers.find(x=>x.id===id); if(!o) return;
      const txt = `Ø¹Ø±Ø¶: ${o.name}\nØ§Ù„Ø¯ÙˆÙ„Ø©: ${o.country}\nØ§Ù„Ø³Ø¹Ø±: ${o.price}$${o.note? '\nÙ…Ù„Ø§Ø­Ø¸Ø§Øª: '+o.note:''}`;
      navigator.clipboard.writeText(txt).then(()=>{
        alert('ØªÙ… Ù†Ø³Ø® ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶.');
      });
    }

    function orderNow(id){
      const o = offers.find(x=>x.id===id); if(!o) return;
      const orderId = uid();
      const createdAt = new Date().toISOString();
      const rec = { id: orderId, offerId: id, offerName:o.name, customer:'Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹', status:'pending', note:'', createdAt };
      orders.push(rec); LS.set('vn_orders', orders);

      const msg = `Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ #%23${orderId}%0AØ§Ù„Ø¹Ø±Ø¶: ${encodeURIComponent(o.name)}%0AØ§Ù„Ø¯ÙˆÙ„Ø©: ${encodeURIComponent(o.country)}%0AØ§Ù„Ø³Ø¹Ø±: ${o.price}$%0AÙ…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${location.href}`;
      const link = `https://wa.me/${settings.whatsapp}?text=${msg}`;
      window.open(link, '_blank');
    }

    // Inquiries
    document.getElementById('btnInq').addEventListener('click', ()=>{
      const name = (document.getElementById('inqName').value||'Ù…Ø³ØªØ®Ø¯Ù…');
      const m = (document.getElementById('inqMsg').value||'Ù„Ø¯ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±');
      const msg = `Ù…Ø±Ø­Ø¨Ø§ØŒ Ø£Ù†Ø§ ${encodeURIComponent(name)}. ${encodeURIComponent(m)}`;
      window.open(`https://wa.me/${settings.whatsapp}?text=${msg}`, '_blank');
    });
    document.getElementById('btnInqClear').addEventListener('click', ()=>{
      document.getElementById('inqName').value='';
      document.getElementById('inqMsg').value='';
    });

    // Search & sort
    document.getElementById('q').addEventListener('input', renderOffers);
    document.getElementById('sort').addEventListener('change', renderOffers);

    // Mobile menu
    document.getElementById('menuBtn').addEventListener('click', ()=>{
      document.getElementById('nav').classList.toggle('open');
    });

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // ======= Admin =======
    const adminGate = document.getElementById('adminGate');
    const adminArea = document.getElementById('adminArea');

    function openAdmin(){ adminGate.style.display='none'; adminArea.style.display='block'; fillAdminForms(); renderOffersTable(); renderOrdersTable(); }

    document.getElementById('btnLogin').addEventListener('click', ()=>{
      const val = document.getElementById('adminPassInput').value;
      if(val === adminPass){ adminOK = true; openAdmin(); }
      else alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.');
    });

    function fillAdminForms(){
      document.getElementById('setSiteName').value = settings.siteName;
      document.getElementById('setLogo').value = settings.logo;
      document.getElementById('setWelcomeText').value = settings.welcomeText;
      document.getElementById('setWhats').value = settings.whatsapp;
      document.getElementById('setNewPass').value = '';
    }

    document.getElementById('btnSaveSettings').addEventListener('click', ()=>{
      settings.siteName = document.getElementById('setSiteName').value || DEF_SETTINGS.siteName;
      settings.logo = document.getElementById('setLogo').value || DEF_SETTINGS.logo;
      settings.welcomeText = document.getElementById('setWelcomeText').value || DEF_SETTINGS.welcomeText;
      settings.whatsapp = document.getElementById('setWhats').value || DEF_SETTINGS.whatsapp;
      const np = document.getElementById('setNewPass').value;
      if(np){ adminPass = np; LS.set('vn_adminPass', adminPass); }
      LS.set('vn_site', settings);
      applySettings();
      alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.');
    });

    // Manage offers table
    function renderOffersTable(){
      const tb = document.querySelector('#offersTable tbody');
      tb.innerHTML = offers.map((o,i)=>`
        <tr>
          <td>${i+1}</td>
          <td>${o.name}</td>
          <td>${o.country}</td>
          <td>${o.price}$</td>
          <td>
            <button class="btn ghost" onclick="editOffer('${o.id}')">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="btn danger" onclick="delOffer('${o.id}')">Ø­Ø°Ù</button>
          </td>
        </tr>
      `).join('');
    }

    document.getElementById('btnAddOffer').addEventListener('click', ()=>{
      const name = document.getElementById('ofName').value.trim();
      const country = document.getElementById('ofCountry').value.trim();
      const price = parseFloat(document.getElementById('ofPrice').value || '0');
      const note = document.getElementById('ofNote').value.trim();
      if(!name || !country || !(price>=0)) return alert('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„Ø³Ø¹Ø±');
      offers.push({ id: uid(), name, country, price, note });
      LS.set('vn_offers', offers);
      document.getElementById('ofName').value='';
      document.getElementById('ofCountry').value='';
      document.getElementById('ofPrice').value='';
      document.getElementById('ofNote').value='';
      renderOffersTable(); renderOffers();
    });

    window.delOffer = function(id){
      if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) return;
      offers = offers.filter(o=>o.id!==id); LS.set('vn_offers', offers);
      renderOffersTable(); renderOffers();
    }

    window.editOffer = function(id){
      const o = offers.find(x=>x.id===id); if(!o) return;
      const name = prompt('Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶', o.name); if(name===null) return;
      const country = prompt('Ø§Ù„Ø¯ÙˆÙ„Ø©/Ø§Ù„ÙˆØµÙ', o.country); if(country===null) return;
      const price = parseFloat(prompt('Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±', o.price)); if(isNaN(price)) return alert('Ø³Ø¹Ø± ØºÙŠØ± ØµØ§Ù„Ø­');
      const note = prompt('Ù…Ù„Ø§Ø­Ø¸Ø§Øª', o.note||'');
      o.name=name; o.country=country; o.price=price; o.note=note;
      LS.set('vn_offers', offers);
      renderOffersTable(); renderOffers();
    }

    // Orders table
    function renderOrdersTable(){
      const tb = document.querySelector('#ordersTable tbody');
      tb.innerHTML = (orders||[]).slice().reverse().map(o=>`
        <tr>
          <td>#${o.id}</td>
          <td>${o.offerName||o.offerId}</td>
          <td>${o.customer}</td>
          <td>
            <span class="status ${o.status==='pending'?'st-pending':o.status==='replied'?'st-replied':'st-done'}">${o.status}</span>
          </td>
          <td>${o.note||''}</td>
          <td>
            <button class="btn ghost" onclick="setOrderStatus('${o.id}','replied')">ØªÙ… Ø§Ù„Ø±Ø¯</button>
            <button class="btn primary" onclick="setOrderStatus('${o.id}','done')">Ù…ÙƒØªÙ…Ù„</button>
            <button class="btn danger" onclick="deleteOrder('${o.id}')">Ø­Ø°Ù</button>
          </td>
        </tr>
      `).join('');
    }

    window.setOrderStatus = function(id, st){
      const o = orders.find(x=>x.id===id); if(!o) return;
      o.status = st; LS.set('vn_orders', orders); renderOrdersTable();
    }
    window.deleteOrder = function(id){
      if(!confirm('Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ØŸ')) return;
      orders = orders.filter(x=>x.id!==id); LS.set('vn_orders', orders); renderOrdersTable();
    }

    // ======= First paint =======
    applySettings();
    renderOffers();

    // Auto open admin if already logged this session (simple UX)
    // (Kept minimal: real apps use auth tokens)

  </script>
</body>
</html>
